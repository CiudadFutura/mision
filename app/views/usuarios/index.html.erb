<div class="agile-grids">
  <!-- tables -->

  <div class="agile-tables">
    <div class="w3l-table-info">
      <div class="row">
        <h2>Usuarios</h2>
        <div class="navbar navs-fixed">
          <%= link_to 'Exportar CSV', usuarios_path(format: 'csv'), class: 'btn btn-success btn-xs' %>
        </div>
          <table class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Id</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Rol</th>
                <th>Distrito</th>
                <th colspan="3"></th>
              </tr>
            </thead>

          <tbody>
            <% @usuarios.each do |usuario| %>
                <tr>
                  <td><%= usuario.id %></td>
                  <td><%= usuario.nombre %></td>
                  <td><%= usuario.apellido %></td>
                  <td><%= usuario.roles.present? ? usuario.roles.first.name : "--" %></td>
                  <td><%= usuario.try('circulo').try('warehouse_id') ? usuario.circulo.warehouse.name: '' %></td>
                  <td><%= link_to 'Ver', usuario, class: 'btn btn-info btn-mini' %></td>
                  <td><%= link_to 'Modificar', edit_usuario_path(usuario), class: 'btn btn-warning btn-mini' %></td>
                  <td><%= link_to 'Eliminar', usuario, method: :delete, data: { confirm: 'Esta seguro?' }, class: 'btn btn-danger btn-mini' %></td>
                </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <% if @usuarios.present? && @usuarios.count > 50 %>
        <div class="row">
          <%= will_paginate @usuarios, :previous_label => 'Previo', :next_label => 'Siguiente' %>
        </div>
      <% end %>
    </div>
  </div>
</div>