<%- model_class = Producto -%>
<% content_for :cart_menu do %>
  <%= render 'carts/menu' %>
<% end %>


<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>
<%= link_to t('.new', :default => t("helpers.links.new")),
            new_producto_path,
            :class => 'btn btn-primary' if can? :manage, Producto %>
<div id="productos" class="row list-group">
<% @productos.each do |producto|%>
    <div class="item col-xs-4 col-lg-4">
      <div class="thumbnail">
          <%= image_tag(producto.imagen, size: "180", class: "group list-group-image" ) %>
        <div class="caption text-center left">
          <h4 class="group inner list-group-item-heading"><%= producto.nombre %></h4>
        </div>
        <div class="col-lg-12">
          <p class="precio text-center">precio misi√≥n $<%= producto.precio %></p>
        </div>
        <div class="col-lg-12">
          <p class="precio-super text-center">ahorro %<%= producto.precio_super %></p>
        </div>
        <div class="col-lg-12 text-center">
          <div class="btn-group" role="group" aria-label="...">
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                1
                <span class="caret"></span>
              </button>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#">2</a></li>
                <li><a href="#">3</a></li>
                <li><a href="#">4</a></li>
              </ul>
            </div>
            <%= button_tag(type: 'button', class: 'btn btn btn-default', data: {
                                                 target: 'Add to',
                                                 addUrl: add_to_cart_path(producto)
                                         }) do %>
                <span class="icon-cart glyphicon-align-left"></span> Agregar al carro
            <% end %>
          </div>
        </div>
        <div class="row">


        </div>
      </div>
    </div>
<% end %>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:imagen) %></th>
      <th><%= "Categoria" %></th>
      <th><%= model_class.human_attribute_name(:nombre) %></th>
      <th><%= model_class.human_attribute_name(:descripcion) %></th>
      <th><%= model_class.human_attribute_name(:precio) %></th>
      <th><%= model_class.human_attribute_name(:precio_super) %></th>
      <th><%= model_class.human_attribute_name(:cantidad_permitida) %></th>
      <% if can? [:update, :detele], Producto %>
        <th><%=t '.actions', :default => t("helpers.actions") %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @productos.each do |producto| %>
      <tr>
        <td><%= link_to producto.id, producto_path(producto) %></td>
        <td><%= image_tag(producto.imagen, size: "50") %></td>
        <td><%= producto.categorias.map(&:nombre).join(',') %></td>
        <td><%= producto.nombre %></td>
        <td><%= producto.descripcion %></td>
        <td><%= producto.precio %></td>
        <td><%= producto.precio_super %></td>
        <td><%= producto.cantidad_permitida %></td>
        <td>
          <select class="cantidad">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
          <%= link_to "Agregar al carro", '#', class: "btn btn-default btn-xs", data: {
              target: 'Add to', 
              addUrl: add_to_cart_path(producto) } %>
        </td>
        <% if can? [:update, :detele], producto %>
          <td>
            <%= link_to t('.edit', :default => t("helpers.links.edit")),
                        edit_producto_path(producto), :class => 'btn btn-default btn-xs'  %>
            <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                        producto_path(producto),
                        :method => :delete,
                        :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                        :class => 'btn btn-xs btn-danger' %>
          </td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_producto_path,
            :class => 'btn btn-primary' if can? :manage, Producto %>
